<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<link rel="icon" href="/favicon.ico" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="theme-color" content="#000000" />
<title>login</title>
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Anonymous+Pro%3A700" />
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C700" />
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Nova+Cut%3A400" />
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="./styles/login.css" />
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- 안내창 제목을 바꾸기 위한 코드 -->

<!-- input의 submit 사용 시 배경 없음 -->
<style>
input[type="submit"].sign-in-to-astron-dust-oCX {
	border: none;
	background: none;
	height: 50px;
}
</style>

</head>
<body>

	<section class="d-flex vh-100">

		<div class="login-3R5" id="87:125">
			<div class="singup-N5y" id="87:138" onclick="location.href='signup'">
				<div class="signup-Y2P" id="87:139">sign up</div>
				<div class="signuprectlogin-uX9" id="87:140"></div>
			</div>
			<div class="auto-group-vnuz-yG7" id="Vof7XU7SK4E4nEWu6cvNuZ">
				<div class="auto-group-svjh-iUb" id="Vof7fDPXhjSYxdRjxDsVjH">
					<div class="astrondust-3Ws" id="87:141">
						Astron</br>dust
					</div>
					<div class="atston-dust-5iT" id="87:128">Atston dust</div>
					<div
						class="you-can-see-many-constellations-and-talk-to-your-friends-9TR"
						id="87:127">You can see many constellations and talk to your
						friends.</div>
				</div>

				<form th:action="@{/login}" method="post" id="login-form">

					<div class="login-CRh" id="87:129">
						<div class="login-GwM" id="87:137">sign in to Astron dust</div>

						<input class="id-yas" type="text" placeholder="ID" name="UID" />
						<input type="password" class="password-yUP" placeholder="password"
							name="password" /> <input type="submit" value="→ login"
							class="sign-in-to-astron-dust-oCX" id="87:136" />
					</div>
				</form>
			</div>
		</div>


		<!-- -> login 클릭 시  -->
		<script>
		document.querySelector('#login-form').addEventListener('submit', async function(e) {
			  e.preventDefault();  // 폼의 기본 제출 동작을 막는다

			  const UID = document.querySelector('.id-yas').value;
			  const password = document.querySelector('.password-yUP').value;

			  if (!UID || !password) {
			    // 사용자 이름 또는 비밀번호가 입력되지 않았을 때 에러 메시지 표시
			    Swal.fire('로그인 실패', '아이디 또는 비밀번호를 입력해주세요.', 'error');
			    return;
			  }

			  const response = await fetch('/login', {
			    method: 'POST',
			    body: `UID=${encodeURIComponent(UID)}&password=${encodeURIComponent(password)}`,
			    headers: {
			      'Content-Type': 'application/x-www-form-urlencoded'
			    }
			  });

			  if (response.ok) {
			    Swal.fire('로그인 성공', '로그인에 성공했습니다.', 'success')
			      .then(() => {
			        location.href = 'main'; // 로그인 성공 후 리다이렉트할 페이지
			      });
			  } else {
			    Swal.fire('로그인 실패', '아이디 또는 비밀번호가 틀렸습니다.', 'error');
			  }
			});
    </script>

	</section>

</body>